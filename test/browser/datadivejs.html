<html>
<script src="https://static.datadive.ai/sdk/datadive-snippet-1.3.0.min.js" type="text/javascript"></script>
<script>
  /* (function (e, t) {
    var n = e.datadive || { _q: [], _iq: {} }; var r = t.createElement("script")
      ; r.type = "text/javascript"; r.async = true
      ; r.src = "/datadive.js"
      ; r.onload = function () {
        if (e.datadive.runQueuedFunctions) {
          e.datadive.runQueuedFunctions()
        } else {
          console.log("[Datadive] Error: could not load SDK")
        }
      }
      ; var i = t.getElementsByTagName("script")[0]; i.parentNode.insertBefore(r, i)
      ; function s(e, t) {
        e.prototype[t] = function () {
          this._q.push([t].concat(Array.prototype.slice.call(arguments, 0))); return this
        }
      }
    var o = function () { this._q = []; return this }
      ; var a = ["add", "append", "clearAll", "prepend", "set", "setOnce", "unset"]
      ; for (var u = 0; u < a.length; u++) { s(o, a[u]) } n.Identify = o; var c = function () {
        this._q = []
          ; return this
      }
      ; var l = ["setProductId", "setQuantity", "setPrice", "setRevenueType", "setEventProperties"]
      ; for (var p = 0; p < l.length; p++) { s(c, l[p]) } n.Revenue = c
      ; var d = ["init", "logEvent", "logRevenue", "setUserId", "setUserProperties", "setOptOut", "setVersionName", "setDomain", "setDeviceId", "setGlobalUserProperties", "identify", "clearUserProperties", "setGroup", "logRevenueV2", "regenerateDeviceId", "logEventWithTimestamp", "logEventWithGroups", "setSessionId"]
      ; function v(e) {
        function t(t) {
          e[t] = function () {
            e._q.push([t].concat(Array.prototype.slice.call(arguments, 0)))
          }
        }
        for (var n = 0; n < d.length; n++) { t(d[n]) }
      } v(n); n.getInstance = function (e) {
        e = (!e || e.length === 0 ? "$default_instance" : e).toLowerCase()
          ; if (!n._iq.hasOwnProperty(e)) { n._iq[e] = { _q: [] }; v(n._iq[e]) } return n._iq[e]
      }
      ; e.datadive = n
  })(window, document); */


  var setUserId = function () {
    var userId = prompt('Input retrieved_user_id', 'test_seq_user_id');
    datadive.getInstance().setUserId(userId);
  };
  var complete_signup = function () {
    datadive.getInstance().logEvent('signed_upsigned_in');
  };
  var response_login = function () {
    datadive.getInstance().logEvent('response_login');
  };
  var setUserProperties = function () {
    var identify = new datadive.Identify()
      .set('user_id', "retrieved_user_id")
      .set('push', "user.isAgreed")
      .set('gender', "user.gender")
      .set('userlevel', "user.level")
      .set('firstlogindate', "user.firstdate")
      .set('birthday', "user.birthday");
    datadive.getInstance().identify(identify);
  };
  var clearUserProperties = function () {
    datadive.getInstance().clearUserProperties();
  };
  var home_viewed = function () {
    datadive.getInstance().logEvent('home_viewed');
  };
  var view_category = function () {
    var eventProperties = {
      'gategory_code': 'category.id',
      'gategory_name': 'category.name',
    };
    datadive.getInstance().logEvent('view_category', eventProperties);
  };
  var product_viewed = function () {
    var eventProperties = {
      'itemid': 'item.uuidString',
      'product_name': 'item.name',
      'price': 10000,
      'category_code': 'item.category.id',
      'category_name': 'item.category.name',
      'brand_id': 'item.brand.id',
      'brand_name': 'item.brand.name',
      'review_count': 99, // 제품의 상품평 수
      'review_avg_rating': 7, // 제품의 상품평 평균 평점
    };
    datadive.getInstance().logEvent('product_viewed', eventProperties);
  };
  var click_shoppingbag_in_product = function () {
    var eventProperties = {
      'itemid': "String",
      'product_name': "String",
      'quantity': 1,
      'price': 9000,
      'category_code': "String",
      'category_name': "String",
      'brand_id': "String",
      'brand_name': "String",
      'review_count': 928, // 제품의 상품평 수
      'review_avg_rating': 7.9, // 제품의 상품평 평균 평점
    };
    datadive.getInstance().logEvent('click_shoppingbag_in_product', eventProperties);
  };
  var view_userinfo = function () {
    var products = [
      {
        'itemid': 'String',
        'product_name': 'String',
        'quantity': 2,
        'price': 19800,
      },
      {
        'itemid': 'String',
        'product_name': 'String',
        'quantity': 1,
        'price': 19800,
      }
    ]
    var eventProperties = {
      'products': products,
      'order_total_price': 59400, // "총 주문 금액. 즉, price 의 총 합 "
      'order_total_count': 2, // "products 제품 종류 수. 즉, 배열의 길이"
    };
    datadive.getInstance().logEvent('view_userinfo', eventProperties);
  };
  var order_completed = function () {
    var products = [
      {
        'itemid': 'String',
        'product_name': 'String',
        'quantity': 2,
        'price': 19800,
      },
      {
        'itemid': 'String',
        'product_name': 'String',
        'quantity': 1,
        'price': 19800,
      }
    ]
    var eventProperties = {
      'products': products,
      'orderserial': 'String',
      'order_total_price': 59400, // "총 주문 금액. 즉, price 의 총 합 "
      'order_total_count': 2, // "products 제품 종류 수. 즉, 배열의 길이"
      'payment_total_price': 59400, // 실제 결제 총 금액
      'payment_method': 'String', // 결제 수단
      'delivery_fee': 2500, // 배송료
      'total_discount': 0, // 할인 금액
    };
    datadive.getInstance().logEvent('order_completed', eventProperties);
  };
  var review_submitted = function () {
    var eventProperties = {
      'itemid': 'String',
      'product_name': 'String',
      'price': 29800,
      'category_code': 'String',
      'category_name': 'String',
      'brand_id': 'String',
      'brand_name': 'String',
      'review_rating': 9.5,
      'review_body': 'String',
    };
    datadive.getInstance().logEvent('review_submitted', eventProperties);
  };
</script>
<script>
  datadive.getInstance().init('d84c8a499fef4e3682fb1b3492bc31f4', null, null, function (instance) {
    console.log('deviceId >> ' + instance.options.deviceId);
  });
  datadive.getInstance().setVersionName('Web');
</script>

<body>
  <h3>Datadive JS Test</h3>
  <ul>
    <li><a href="javascript:setUserId();">Set user ID</a></li>
    <li><a href="javascript:complete_signup();">회원 가입 완료 이벤트 (Sign Up)</a></li>
    <li><a href="javascript:response_login();">로그인 완료 이벤트 (Sign In)</a></li>
    <li><a href="javascript:setUserProperties();">회원 정보 업데이트</a></li>
    <li><a href="javascript:clearUserProperties();">로그아웃 완료</a></li>
    <li><a href="javascript:home_viewed();">메인 화면 진입 이벤트 (Home Viewed)</a></li>
    <li><a href="javascript:view_category();">카테고리 화면 이벤트 (Product Category Viewed)</a></li>
    <li><a href="javascript:product_viewed();">제품 페이지 이벤트 (Product Detail Viewed)</a></li>
    <li><a href="javascript:click_shoppingbag_in_product();">장바구니에 추가 (Product added to cart)</a></li>
    <li><a href="javascript:view_userinfo();">결제 시작 이벤트 (Order started)</a></li>
    <li><a href="javascript:order_completed();">결제 완료 이벤트 (Order Completed)</a></li>
    <li><a href="javascript:review_submitted();">상품평 작성 이벤트 (Review submitted)</a></li>
</body>

</html>